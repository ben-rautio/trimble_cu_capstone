<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLE Lab 5: src/Source_Files/i2c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BLE Lab 5
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Alexander Bork</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('i2c_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">i2c.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains i2c driver functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;i2c.h&quot;</code><br />
<code>#include &quot;scheduler.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac48f5b0ab44ed089961155788e45ab6e"><td class="memItemLeft" align="right" valign="top"><a id="ac48f5b0ab44ed089961155788e45ab6e"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>i2c_bus_reset</b> ()</td></tr>
<tr class="separator:ac48f5b0ab44ed089961155788e45ab6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762eb182d674c3a32a3a605ddb17b40b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a762eb182d674c3a32a3a605ddb17b40b">i2c_ackIRPT</a> (void)</td></tr>
<tr class="memdesc:a762eb182d674c3a32a3a605ddb17b40b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that handles any I2C ack interrupts.  <a href="i2c_8c.html#a762eb182d674c3a32a3a605ddb17b40b">More...</a><br /></td></tr>
<tr class="separator:a762eb182d674c3a32a3a605ddb17b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7e81e9613f9094932bea805b5a9717"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8e7e81e9613f9094932bea805b5a9717">i2c_nackIRPT</a> (void)</td></tr>
<tr class="memdesc:a8e7e81e9613f9094932bea805b5a9717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that handles any I2C NACK interrupts.  <a href="i2c_8c.html#a8e7e81e9613f9094932bea805b5a9717">More...</a><br /></td></tr>
<tr class="separator:a8e7e81e9613f9094932bea805b5a9717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf131e029a3a43efe855994cb3db9cd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aabf131e029a3a43efe855994cb3db9cd">i2c_mstopIRPT</a> (void)</td></tr>
<tr class="memdesc:aabf131e029a3a43efe855994cb3db9cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that handles any I2C MSTOP interrupts.  <a href="i2c_8c.html#aabf131e029a3a43efe855994cb3db9cd">More...</a><br /></td></tr>
<tr class="separator:aabf131e029a3a43efe855994cb3db9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69665878268b439e2e804da464dde42c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a69665878268b439e2e804da464dde42c">i2c_rxdatavIRPT</a> (void)</td></tr>
<tr class="memdesc:a69665878268b439e2e804da464dde42c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that handles any I2C RXDATAV interrupts.  <a href="i2c_8c.html#a69665878268b439e2e804da464dde42c">More...</a><br /></td></tr>
<tr class="separator:a69665878268b439e2e804da464dde42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad392da40fbc730b1cb2562da0b0a4dcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ad392da40fbc730b1cb2562da0b0a4dcb">i2c_bus_reset</a> (I2C_TypeDef *i2c)</td></tr>
<tr class="memdesc:ad392da40fbc730b1cb2562da0b0a4dcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the I2C bus.  <a href="i2c_8c.html#ad392da40fbc730b1cb2562da0b0a4dcb">More...</a><br /></td></tr>
<tr class="separator:ad392da40fbc730b1cb2562da0b0a4dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd501191443ae27fa7ab059461676249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#afd501191443ae27fa7ab059461676249">i2c_open</a> (I2C_TypeDef *i2c, <a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *i2c_setup)</td></tr>
<tr class="memdesc:afd501191443ae27fa7ab059461676249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the I2C peripheral for functionality.  <a href="i2c_8c.html#afd501191443ae27fa7ab059461676249">More...</a><br /></td></tr>
<tr class="separator:afd501191443ae27fa7ab059461676249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d6496562a8bcc2b3e7125b02836ac7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa6d6496562a8bcc2b3e7125b02836ac7">i2c_start</a> (I2C_TypeDef *i2c, uint32_t SA, uint32_t command, uint32_t read, uint32_t write, uint32_t *data, uint32_t read_cb)</td></tr>
<tr class="memdesc:aa6d6496562a8bcc2b3e7125b02836ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the I2C State Machine.  <a href="i2c_8c.html#aa6d6496562a8bcc2b3e7125b02836ac7">More...</a><br /></td></tr>
<tr class="separator:aa6d6496562a8bcc2b3e7125b02836ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a906df0c8802c3aac9ccbb74b11716920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a906df0c8802c3aac9ccbb74b11716920">I2C0_IRQHandler</a> ()</td></tr>
<tr class="memdesc:a906df0c8802c3aac9ccbb74b11716920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Handler for I2C0.  <a href="i2c_8c.html#a906df0c8802c3aac9ccbb74b11716920">More...</a><br /></td></tr>
<tr class="separator:a906df0c8802c3aac9ccbb74b11716920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0ce3354daaf3dc2912dd9e7b70260d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a6e0ce3354daaf3dc2912dd9e7b70260d">I2C1_IRQHandler</a> ()</td></tr>
<tr class="memdesc:a6e0ce3354daaf3dc2912dd9e7b70260d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Handler for I2C1.  <a href="i2c_8c.html#a6e0ce3354daaf3dc2912dd9e7b70260d">More...</a><br /></td></tr>
<tr class="separator:a6e0ce3354daaf3dc2912dd9e7b70260d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a27645dfc8acd42ad8b4a8c42c18f2e08"><td class="memItemLeft" align="right" valign="top"><a id="a27645dfc8acd42ad8b4a8c42c18f2e08"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>TXB_STATUS_MASK</b> = 0b10000000</td></tr>
<tr class="separator:a27645dfc8acd42ad8b4a8c42c18f2e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f4427bd1ef3b9f260ddde36441eed0"><td class="memItemLeft" align="right" valign="top"><a id="ac3f4427bd1ef3b9f260ddde36441eed0"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>START_CMD</b> = 0b1</td></tr>
<tr class="separator:ac3f4427bd1ef3b9f260ddde36441eed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1da847fa2a8965f6929f8ebeb5a5cd"><td class="memItemLeft" align="right" valign="top"><a id="a0a1da847fa2a8965f6929f8ebeb5a5cd"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>STOP_CMD</b> = 0b10</td></tr>
<tr class="separator:a0a1da847fa2a8965f6929f8ebeb5a5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab180181d4995be00ef4ab75f83eaa991"><td class="memItemLeft" align="right" valign="top"><a id="ab180181d4995be00ef4ab75f83eaa991"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_FLAG_MSTOP</b> = 0b100000000</td></tr>
<tr class="separator:ab180181d4995be00ef4ab75f83eaa991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4948c76c56acd4d6970e555e832fc747"><td class="memItemLeft" align="right" valign="top"><a id="a4948c76c56acd4d6970e555e832fc747"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_IFC_CLEAR</b> = 0x7ffcf</td></tr>
<tr class="separator:a4948c76c56acd4d6970e555e832fc747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d18c511fdbf2e624f4f57b998f801a"><td class="memItemLeft" align="right" valign="top"><a id="a81d18c511fdbf2e624f4f57b998f801a"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>I2C_IEN_CLEAR</b> = 0x0</td></tr>
<tr class="separator:a81d18c511fdbf2e624f4f57b998f801a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9103f595450e9970fb6176e7f188c24"><td class="memItemLeft" align="right" valign="top"><a id="ac9103f595450e9970fb6176e7f188c24"></a>
static <a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i2c_SM</b></td></tr>
<tr class="separator:ac9103f595450e9970fb6176e7f188c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains i2c driver functions. </p>
<dl class="section author"><dt>Author</dt><dd>Alexander Bork </dd></dl>
<dl class="section date"><dt>Date</dt><dd>9/29/2020 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a906df0c8802c3aac9ccbb74b11716920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906df0c8802c3aac9ccbb74b11716920">&#9670;&nbsp;</a></span>I2C0_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C0_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt Handler for I2C0. </p>
<p>A variable int_flag will store any interrupt flag if it has also been enabled. All of the interrupts will then be cleared from I2C0-&gt;IF. The function handles the scheduling of processing each interrupt.</p>
<dl class="section note"><dt>Note</dt><dd>Int_flag will be used to service every interrupt, with the priority give to ACK, then RXDATAV, then NACK, then MSTOP. </dd></dl>

</div>
</div>
<a id="a6e0ce3354daaf3dc2912dd9e7b70260d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0ce3354daaf3dc2912dd9e7b70260d">&#9670;&nbsp;</a></span>I2C1_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C1_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt Handler for I2C1. </p>
<p>A variable int_flag will store any interrupt flag if it has also been enabled. All of the interrupts will then be cleared from I2C1-&gt;IF. The function handles the scheduling of processing each interrupt.</p>
<dl class="section note"><dt>Note</dt><dd>Int_flag will be used to service every interrupt, with the priority give to ACK, then RXDATAV, then NACK, then MSTOP. </dd></dl>

</div>
</div>
<a id="a762eb182d674c3a32a3a605ddb17b40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a762eb182d674c3a32a3a605ddb17b40b">&#9670;&nbsp;</a></span>i2c_ackIRPT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_ackIRPT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that handles any I2C ack interrupts. </p>
<p>The switch statement in the function will send commands or switch the state of the I2C State Machine depending on which state the ACK interrupt occurs in.</p>
<dl class="section note"><dt>Note</dt><dd>If an ACK occurs in any state after receiving the Most significant byte then an EFM_ASSERT(false) will be triggered signifying that a false condition has occurred. </dd></dl>

</div>
</div>
<a id="ad392da40fbc730b1cb2562da0b0a4dcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad392da40fbc730b1cb2562da0b0a4dcb">&#9670;&nbsp;</a></span>i2c_bus_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_bus_reset </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the I2C bus. </p>
<p>Saves the state of the IEN register, then disables all interrupts. Clears any pending IFs and then clears the I2C transmit buffer. Uses a simultaneous setting of the start and stop bits to STOP the buffer and will stall until the MSTOP interrupt flag has been set. Then it resets the state of the IEN register and resets the state of the peripheral I2C state machine by writing an abort bit.</p>
<dl class="section note"><dt>Note</dt><dd>Does not write anything from the master to the slave, or read anything from the slave to the master.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*i2c</td><td>A pointer to the base address of one of the two i2c peripherals. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aabf131e029a3a43efe855994cb3db9cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf131e029a3a43efe855994cb3db9cd">&#9670;&nbsp;</a></span>i2c_mstopIRPT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_mstopIRPT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that handles any I2C MSTOP interrupts. </p>
<p>The only case where an MSTOP interrupt will occur is in the End transmission state, where the switch case will unblock EM2 reset the state machine to the first state and add the SI7021 read callback to the scheduler.</p>
<dl class="section note"><dt>Note</dt><dd>If an MSTOP occurs in any state besides END transmission then an EFM_ASSERT(false) will be triggered signifying that a false condition has occurred. </dd></dl>

</div>
</div>
<a id="a8e7e81e9613f9094932bea805b5a9717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7e81e9613f9094932bea805b5a9717">&#9670;&nbsp;</a></span>i2c_nackIRPT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_nackIRPT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that handles any I2C NACK interrupts. </p>
<p>The Nack function will only do anything in the Wait for response state if the slave NACKs the start and read commands. In the wait for response state, it will resend the start bit and send the slave address OR'd with the read bit through the transmit buffer.</p>
<dl class="section note"><dt>Note</dt><dd>If a NACK occurs in any state besides during Wait for response, then an EFM_ASSERT(false) will be triggered signifying that a false condition has occurred. </dd></dl>

</div>
</div>
<a id="afd501191443ae27fa7ab059461676249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd501191443ae27fa7ab059461676249">&#9670;&nbsp;</a></span>i2c_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_open </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>i2c_setup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the I2C peripheral for functionality. </p>
<p>Takes in pointers to i2c and i2c_setup to initialize the I2C peripheral. Enables the clock to the I2C peripheral and passes the values from i2c_setup to the I2C peripheral. Routes both the SDA and SCL lines to the SI7021 and enables the routing from the I2C.</p>
<dl class="section note"><dt>Note</dt><dd>Enables ACK, NACK, RXDATAV, and MSTOP interrupts. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*i2c</td><td>A pointer to the base address of one of the two i2c peripherals.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_setup</td><td>A pointer to a struct that is used to initialize the i2c peripheral. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a69665878268b439e2e804da464dde42c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69665878268b439e2e804da464dde42c">&#9670;&nbsp;</a></span>i2c_rxdatavIRPT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_rxdatavIRPT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that handles any I2C RXDATAV interrupts. </p>
<p>The switch statement in the function will send commands or switch the state of the I2C State Machine depending on which state the RXDATAV interrupt occurs in. An RXDATAV signifies that there is data ready in the RXDATA buffer and is ready to be read.</p>
<dl class="section note"><dt>Note</dt><dd>If an RXDATAV occurs in any state besides receiving the Most significant and least significant bytes, then an EFM_ASSERT(false) will be triggered signifying that a false condition has occurred. </dd></dl>

</div>
</div>
<a id="aa6d6496562a8bcc2b3e7125b02836ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d6496562a8bcc2b3e7125b02836ac7">&#9670;&nbsp;</a></span>i2c_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_start </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>SA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>read</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>read_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the I2C State Machine. </p>
<p>After initializing the State Machine, send the Start bit from the I2C to the slave and send the slave address OR'd with the write bit to initialize the slave for writing the command.</p>
<dl class="section note"><dt>Note</dt><dd>Does not enable or disable any interrupts.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*i2c</td><td>A pointer to the base address of one of the two i2c peripherals.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SA</td><td>The address of the slave that the I2C will be using.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">command</td><td>The command that the I2C will send to the slave for reading.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read</td><td>The variable that defines what a read bit is for sending commands.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">write</td><td>The variable that defines what a write bit is for sending commands.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>A pointer to the address of the variable that will store the temperature from the si7021.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_cb</td><td>The value of the si7021_read_cb bit == 0b1000. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2855980263c52be09af3085e80bd06a7.html">Source_Files</a></li><li class="navelem"><a class="el" href="i2c_8c.html">i2c.c</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
